# -*- mode: snippet -*-
# name: dintegral
# type: command
# --
(yas-expand-snippet
(concat "\\int_{${1:-\\infty}}^{${2:\\infty}} ${3:$$(when (and (string= (gm/last-n-chars (+ 7 (length (yas-field-value 1)) (length (yas-field-value 2)))) (format \"_{%s}^{%s} \" (yas-field-value 1) (yas-field-value 2))) (gm/math-expression-p (yas-field-value 1)) (gm/math-expression-p (yas-field-value 2))) (dotimes (i 2) (backward-char) (delete-char -1) (backward-char (length (yas-field-value (- 2 i)))) (delete-char -1)))}"
(gm/increment-snippet-fields (yas--template-content (yas-lookup-snippet "derivative-one-term")) 3)))